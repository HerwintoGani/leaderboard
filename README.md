
# Leaderboard API

Installation steps

Application/API is tested with PHP XAMPP and MYSQL from XAMPP website https://www.apachefriends.org/download.html

1. Ensure you are using PHP 8.1 version
2. Setup the database as needed
3. Clone the repository
4. Run composer install
- Optional, Adjust the .env as needed
5. Setup Database
- Using MIGRATIONS
    - Ensure database has been created 
    - Run php artisan migrate
    - Run php artisan db:seed
    - Run postman "Initial Insert Bulk" API
- Database IMPORT
    - Import the leaderboard.sql to the database
6. Import the Postman collections or refer to API below to use the application


        
## API Reference

#### Inesrt Initial Bulk

Run Only Once!! initial setup to generate data to t_history_submit_score

**Optional**, can be run again please refer to the code inside ScoreController::scoreInsertBulk on how to run again


```http
  POST /api/scoreInsertBulk
```

| Parameter | Type     | Description                |
| :-------- | :------- | :------------------------- |
| `none` |  |  |

#### Insert Score

Inserting data to t_history_submit_score, all data is Required

```http
  POST /api/scoreInsert
```

| Parameter | Type     | Description                       | Example                       |
| :-------- | :------- | :-------------------------------- | :-------------------------------- |
| `user_id`      | `Integer` | **Required**. Based on id from users table | 3 |
| `level`      | `Integer` | **Required**. 1 Digits (0 - 9)| 5 |
| `score`      | `Integer` | **Required**. Up to 20 Digits | 9000000 |

#### Show leaderboard

Show all leaderboard data based on page and take

```http
  POST /api/showLeaderboard
```

| Parameter | Type     | Description                       | Example                       |
| :-------- | :------- | :-------------------------------- | :-------------------------------- |
| `page`      | `Integer` | **Required if username is null**. Pagination for the data, start from 1 | 1 |
| `take`      | `Integer` | **Required if username is null**. Determine how many data to retrieve | 20 |
| `username`      | `String` | **Optional**. Filter for showing which username with rules (input) = (data) | Montana Marvin DVM |

#### Show User

Get all user from database
**Optional**. Input user ID to only show 1 user information

```http
  POST /api/showUser
```

| Parameter | Type     | Description                       | Example                       |
| :-------- | :------- | :-------------------------------- | :-------------------------------- |
| `username`      | `Integer ` |  **Optional**. Based on id from users table | 3 |


#### Task 2

Getting the data from the URL with rules

Request body: timestamp integer 13 digit epoch timestamp -> generated from application

Request header: X-Nonce: randomly generated string different on each request -> generated from application X-API-Signature: SHA256 encoded string

X-API-Signature formula: SHA256 encoded from combined string: nonce + request timestamp + secret key

Secret key: ABC123xyz

```http
  POST /api/callApi
```

| Parameter | Type     | Description                       | Example                       |
| :-------- | :------- | :-------------------------------- | :-------------------------------- |
| `timestamp`      | `timestamp` | Epoch 13 Will be auto generated by application |  |
